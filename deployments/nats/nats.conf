# MediSync NATS Server Configuration
# JetStream enabled for persistent event streaming

# Server identification
server_name: medisync-nats

# Listening ports
port: 4222
http_port: 8222

# Cluster configuration (for future multi-node setup)
# cluster {
#     name: medisync-cluster
#     port: 6222
# }

# Logging
debug: false
trace: false
logtime: true
# log_file: "/data/nats.log"

# JetStream configuration
jetstream {
    # Storage directory
    store_dir: "/data/jetstream"

    # Maximum memory storage (development setting)
    max_memory_store: 256MB

    # Maximum file storage
    max_file_store: 1GB
}

# Authorization (disabled for development, enable in production)
# authorization {
#     users = [
#         { user: etl, password: $NATS_ETL_PASSWORD, permissions: { publish: "etl.>", subscribe: "etl.>" } }
#         { user: agent, password: $NATS_AGENT_PASSWORD, permissions: { publish: "agent.>", subscribe: ["etl.>", "agent.>"] } }
#     ]
# }

# Limits
max_payload: 8MB
max_pending: 64MB
max_connections: 1000

# Ping/Pong for connection health
ping_interval: 30s
ping_max: 3

# Write deadline for slow consumers
write_deadline: 10s
